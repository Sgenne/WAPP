import axios from "axios";
import { useContext } from "react";
import { useNavigate } from "react-router-dom";
import { Comment } from "../../../../server/src/model/comment.interface";
import { AuthContext } from "../../context/AuthContext";


const LoggedInButtonsComment = (props: { userId: number | undefined, commentId: number|undefined }): JSX.Element => {
    const authContext = useContext(AuthContext);
    const navigate = useNavigate();
    if(props.comment.rootThread !== props.userId || !props.commentId){
        return <div className="hide"></div>;
    }  
    
    const deleteComment = async (): Promise<void> => {
      if (!authContext.signedInUser) return;
      const data = {
        userId: authContext.signedInUser.userId,
        password: authContext.password,
        commentId: props.commentId,
      };
      try {
        await axios.delete("http://localhost:8080/comment/comment-thread", {
          data,
        });
      } catch (error) {
        console.log(error);
        return;
      }
  
    };

    const editComment = async (): Promise<void> => {
      if (!authContext.signedInUser) return;
      navigate("http://localhost:8080/comment/comment-thread" + props.commentId);
    };

    return (
        <><button className="button" onClick={deleteComment}>Delete comment</button><button className="button" onClick={editComment}>Edit comment</button></>
        );
  };
  
  export default LoggedInButtonsComment;